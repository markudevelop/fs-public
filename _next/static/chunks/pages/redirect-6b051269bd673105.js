(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26284],{34139:function(e){e.exports=function(){"use strict";function e(e){return Number.isInteger(e)&&e>=0}function t(e){this.name="ArgumentError",this.message=e}return function(r,n){if(n=n||{},"function"!==typeof r)throw new t("fetch must be a function");if("object"!==typeof n)throw new t("defaults must be an object");if(void 0!==n.retries&&!e(n.retries))throw new t("retries must be a positive integer");if(void 0!==n.retryDelay&&!e(n.retryDelay)&&"function"!==typeof n.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!==typeof n.retryOn)throw new t("retryOn property expects an array or function");var i={retries:3,retryDelay:1e3,retryOn:[]};return n=Object.assign(i,n),function(i,o){var a=n.retries,c=n.retryDelay,s=n.retryOn;if(o&&void 0!==o.retries){if(!e(o.retries))throw new t("retries must be a positive integer");a=o.retries}if(o&&void 0!==o.retryDelay){if(!e(o.retryDelay)&&"function"!==typeof o.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");c=o.retryDelay}if(o&&o.retryOn){if(!Array.isArray(o.retryOn)&&"function"!==typeof o.retryOn)throw new t("retryOn property expects an array or function");s=o.retryOn}return new Promise((function(e,t){var n=function(n){var c="undefined"!==typeof Request&&i instanceof Request?i.clone():i;r(c,o).then((function(r){if(Array.isArray(s)&&-1===s.indexOf(r.status))e(r);else if("function"===typeof s)try{return Promise.resolve(s(n,null,r)).then((function(t){t?u(n,null,r):e(r)})).catch(t)}catch(i){t(i)}else n<a?u(n,null,r):e(r)})).catch((function(e){if("function"===typeof s)try{Promise.resolve(s(n,e,null)).then((function(r){r?u(n,e,null):t(e)})).catch((function(e){t(e)}))}catch(e){t(e)}else n<a?u(n,e,null):t(e)}))};function u(e,t,r){var i="function"===typeof c?c(e,t,r):c;setTimeout((function(){n(++e)}),i)}n(0)}))}}}()},73240:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/redirect",function(){return r(1225)}])},1225:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return q},default:function(){return W}});var n=r(85893),i=r(65988),o=r.n(i),a=r(67294),c=r(87357),s=r(9008),u=r(75110),l=r(63366),f=r(87462),d=r(86010),v=r(27192),h=r(70917),m=r(98216),p=r(33616),y=r(11496),g=r(28979);function b(e){return(0,g.Z)("MuiCircularProgress",e)}(0,r(76087).Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _=["className","color","disableShrink","size","style","thickness","value","variant"];let w,O,x,j,S=e=>e;const k=44,N=(0,h.F4)(w||(w=S`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),P=(0,h.F4)(O||(O=S`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),D=(0,y.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,m.Z)(r.color)}`]]}})((({ownerState:e,theme:t})=>(0,f.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:t.palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,h.iv)(x||(x=S`
      animation: ${0} 1.4s linear infinite;
    `),N))),T=(0,y.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),A=(0,y.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,m.Z)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,f.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,h.iv)(j||(j=S`
      animation: ${0} 1.4s ease-in-out infinite;
    `),P))),E=a.forwardRef((function(e,t){const r=(0,p.Z)({props:e,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:a=!1,size:c=40,style:s,thickness:u=3.6,value:h=0,variant:y="indeterminate"}=r,g=(0,l.Z)(r,_),w=(0,f.Z)({},r,{color:o,disableShrink:a,size:c,thickness:u,value:h,variant:y}),O=(e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${(0,m.Z)(n)}`],svg:["svg"],circle:["circle",`circle${(0,m.Z)(r)}`,i&&"circleDisableShrink"]};return(0,v.Z)(o,b,t)})(w),x={},j={},S={};if("determinate"===y){const e=2*Math.PI*((k-u)/2);x.strokeDasharray=e.toFixed(3),S["aria-valuenow"]=Math.round(h),x.strokeDashoffset=`${((100-h)/100*e).toFixed(3)}px`,j.transform="rotate(-90deg)"}return(0,n.jsx)(D,(0,f.Z)({className:(0,d.Z)(O.root,i),style:(0,f.Z)({width:c,height:c},j,s),ownerState:w,ref:t,role:"progressbar"},S,g,{children:(0,n.jsx)(T,{className:O.svg,ownerState:w,viewBox:"22 22 44 44",children:(0,n.jsx)(A,{className:O.circle,style:x,ownerState:w,cx:k,cy:k,r:(k-u)/2,fill:"none",strokeWidth:u})})}))}));var C=E,Z=r(11163),I=r(55113),F=r(34139),M=r.n(F),R=r(92876),$=r(60077);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(s){c=!0,i=s}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=!0,W=function(){var e=(0,u.Z)(),t=(0,Z.useRouter)().query,r=(0,a.useRef)(),i=(0,a.useState)(!1),l=i[0],f=i[1],d=(0,a.useState)(),v=d[0],h=d[1];(0,a.useEffect)((function(){(null===t||void 0===t?void 0:t.searchId)&&(null===t||void 0===t?void 0:t.termId)&&((0,$.L9)({action:"redirect",label:"".concat(t.searchId,"_").concat(t.termId)}),M()(fetch)("https://apiv2.flightscanner.com/flight-searches/v2/".concat(t.searchId,"/clicks/").concat(t.termId),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){H(e,t,r[t])}))}return e}({},$.uH)).then((function(e){return e.json()})).then((function(e){!function(e){if("GET"===e.method)window.location.replace(e.url);else{if("POST"!==e.method)throw new Error("Not found method post"+JSON.stringify(e));h(e),f(!0)}}(e)})).catch((function(e){"AbortError"!==(null===e||void 0===e?void 0:e.name)&&(0,R.Tb)(e)})))}),[t]);var m=(0,a.useMemo)((function(){if(v)return"//yasen.aviasales.ru/adaptors/pixel_click.png?click_id=".concat(v.click_id,"&gate_id=").concat(v.gate_id)}),[v]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.default,{children:(0,n.jsx)("title",{children:e("seo-redirect-page-title")})}),(0,n.jsxs)(c.Z,{sx:{height:"100%"},children:[(0,n.jsx)(o(),{id:"bd380a367055a6cc",children:"html, body, body>div:first-child, div#__next, div#__next>div{height:100%}"}),(0,n.jsxs)(c.Z,{sx:{display:"flex",height:"100%",alignItems:"center",m:1},children:[l&&v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{width:"0",height:"0",id:"pixel",src:m,onLoad:function(){r.current.submit()},alt:"",className:"jsx-bd380a367055a6cc"}),(0,n.jsx)("form",{id:"redirect_params_form",method:"POST",action:v.url,ref:r,className:"jsx-bd380a367055a6cc",children:Object.entries(v.params).map((function(e){var t=U(e,2),r=t[0],i=t[1];return(0,n.jsx)("input",{type:"hidden",name:r,value:String(i),className:"jsx-bd380a367055a6cc"},r)}))})]}),(0,n.jsxs)(I.Z,{sx:{p:2,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",margin:"0 auto"},children:[(0,n.jsx)(C,{}),(0,n.jsxs)("h1",{className:"jsx-bd380a367055a6cc",children:[e("redirect-page-title")," ",(0,n.jsx)("strong",{className:"jsx-bd380a367055a6cc",children:null===t||void 0===t?void 0:t.label})]}),(0,n.jsx)("p",{className:"jsx-bd380a367055a6cc",children:e("redirect-page-thank-you")}),(0,n.jsx)("p",{className:"jsx-bd380a367055a6cc",children:"Flightscanner.com"})]})]})]})]})}},60077:function(e,t,r){"use strict";r.d(t,{_B:function(){return c},qd:function(){return y},Hl:function(){return u},RN:function(){return n},uH:function(){return O},nH:function(){return w},WX:function(){return h},Up:function(){return m},L9:function(){return x}});var n=function(e){var t=e.replaceUrl,r=e.searchState,n=e.push,i=e.replace,o=e.t,a=e.query,c=r.departureDate,s=r.returnDate,u=r.tripClass,l=void 0===u?{id:"Y"}:u,f=r.adults,d=void 0===f?1:f,v=r.children,h=void 0===v?0:v,m=r.infants,p=void 0===m?0:m,y=r.redirectToBooking,g=r.from,b=r.to,_=c?null===c||void 0===c?void 0:c.toISOString().split("T")[0]:null,w=s?null===s||void 0===s?void 0:s.toISOString().split("T")[0]:"none",O={tripClass:null===l||void 0===l?void 0:l.id,adults:d,children:h,infants:p,redirectToBooking:y},x=[o("routes-search"),"".concat(null===g||void 0===g?void 0:g.code,":").concat(null===g||void 0===g?void 0:g.city_name,":").concat(null===g||void 0===g?void 0:g.country_name),(null===b||void 0===b?void 0:b.country_name)?"".concat(null===b||void 0===b?void 0:b.code,":").concat(null===b||void 0===b?void 0:b.city_name,":").concat(null===b||void 0===b?void 0:b.country_name):"".concat(null===b||void 0===b?void 0:b.code,":").concat(null===b||void 0===b?void 0:b.city_name),_];w&&x.push(w);var j="/"+x.join("/"),S=Object.keys(O).map((function(e){return e+"="+O[e]})).join("&"),k=(null===a||void 0===a?void 0:a.gclid)?"&gclid=".concat(a.gclid):"",N="".concat(j,"?").concat(S).concat(k);y&&!t?(window.open(N),s?window.location.replace("https://tp.media/r?marker=56123&trs=15329&p=2076&u=https%3A%2F%2Fwww.booking.com%2Fsearchresults.en-gb.html%3Fss%3D".concat(b.city_name,"%2C+").concat(b.country_name,"%26checkin%3D").concat(_,"%26checkout%3D").concat(w)):window.location.replace("https://tp.media/r?marker=56123&trs=15329&p=2076&u=https%3A%2F%2Fwww.booking.com%2Fsearchresults.en-gb.html%3Fss%3D".concat(b.city_name,"%2C+").concat(b.country_name,"%26checkin%3D").concat(_))):t?i(N):n(N)},i=r(99560),o=r.n(i);function a(e){var t=Object.keys(e).sort(),r={};for(var n in t)r[t[n]]=e[t[n]];return r}var c,s,u=function(e,t,r){r&&(e.marker="".concat(e.marker,".").concat(r));var n=a(e);n.passengers=a(e.passengers),e.segments.forEach((function(e,t){var r=a(e);n.segments[t]=Object.values(r).join(":")})),n.passengers=Object.values(e.passengers).join(":"),n.segments=Object.values(n.segments).join(":");var i=t?[t].concat(Object.values(n)).join(":"):Object.values(n).join(":");return o()(i)};function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.BEST=0]="BEST",e[e.CHEAP=1]="CHEAP",e[e.QUICK=2]="QUICK"}(c||(c={})),function(e){e[e.ANY=0]="ANY",e[e.NON_STOP=1]="NON_STOP",e[e.ONE_STOP=2]="ONE_STOP",e[e.TWO_STOP=3]="TWO_STOP"}(s||(s={}));var f=r(82555),d=r(23362),v=function(e,t){return e-t},h=function(e){return Object.values(e).sort((function(e,t){return e.unified_price-t.unified_price}))},m=function(e){var t,r=e.slice().sort((function(e,t){var r=h(e.terms),n=h(t.terms);return v(r[r.length-1].unified_price,n[n.length-1].unified_price)})),n=e.slice().sort((function(e,t){return v(e.total_duration,t.total_duration)})),i=p(e.slice(),r,n);return l(t={},c.BEST,i),l(t,c.QUICK,n),l(t,c.CHEAP,r),t},p=function(e,t,r){return e.sort((function(e,n){var i=h(e.terms),o=h(n.terms),a=h(t[0].terms);return v(e.total_duration/r[0].total_duration*(i[0].unified_price/a[0].unified_price),n.total_duration/r[0].total_duration*(o[0].unified_price/a[0].unified_price))}))},y=function(e,t){return e.slice().filter((function(e){if(!(Object.keys(e.terms).length>0))return!1;if(t.stop!==s.ANY&&!g(e,Number(t.stop)))return!1;if((0!==t.duration[0]||0!==t.duration[1])&&!b(e,t.duration[0],t.duration[1]))return!1;if((0!==t.price[0]||0!==t.price[1])&&!_(e,t.price[0],t.price[1]))return!1;return!0}))},g=function(e,t){switch(t){case s.NON_STOP:return 0===e.max_stops;case s.ONE_STOP:return e.max_stops<=1;case s.TWO_STOP:return e.max_stops<=2;default:return!0}},b=function(e,t,r){return!t||!r||!!e.segment_durations.filter((function(e){return e>=t&&e<=r})).length},_=function(e,t,r){if(t&&r){var n=Object.values(e.terms),i=f(n,"unified_price"),o=d(n,"unified_price");return i.unified_price>=t&&o.unified_price<=r}return!0};var w=function(e){var t,r=Math.floor(e/3600),n=Math.floor(e%3600/60);return"%hours%h %minutes%m".replace(/%hours%/,String(r)).replace(/%minutes%/,(t=n)<10?"0"+t:t)},O={retryDelay:function(e){return 1e3*Math.pow(2,e)},retryOn:function(e,t,r){return!(e>3)&&("AbortError"!==(null===t||void 0===t?void 0:t.name)&&!!(null!==t||r&&r.status>=400))}},x=function(e){var t=e.action,r=e.category,n=e.label,i=e.value;window&&window.gtag&&window.gtag("event",t,{event_category:r,event_label:n,value:i})}}},function(e){e.O(0,[76523,37296,65988,49774,92888,40179],(function(){return t=73240,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=redirect-6b051269bd673105.js.map